
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>层次分析法（以选女友为例） - hplonline</title>
  <meta name="author" content="hplonline">

  
  <meta name="description" content="(hplonline)2009.9.7 简介： 总的来说，个人认为是一种理论上很充分，
但数据源很随意的方法。 通常在做某种决策的时候，
方案带有若干属性，
无法找到某个方案让各个属性同时满足最优。
这就需要取舍，决定究竟哪个方案更好。 其精华在于通过分层，
将比较局部化，使得人更容易作出决策。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hupili.github.io/backup-hplonline/blog/2009/09/07/%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95%EF%BC%88%E4%BB%A5%E9%80%89%E5%A5%B3%E5%8F%8B%E4%B8%BA%E4%BE%8B%EF%BC%89">
  <link href="/backup-hplonline/favicon.png" rel="icon">
  <link href="/backup-hplonline/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/backup-hplonline/atom.xml" rel="alternate" title="hplonline" type="application/atom+xml">
  <script src="/backup-hplonline/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/backup-hplonline/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/backup-hplonline/">hplonline</a></h1>
  
    <h2>backup from 2006 to 2012 (original hi.baidu.com/hplonline/)</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/backup-hplonline/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hupili.github.io/backup-hplonline" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/backup-hplonline/">Blog</a></li>
  <li><a href="/backup-hplonline/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">层次分析法（以选女友为例）</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-07T21:03:00+08:00" pubdate data-updated="true">Sep 7<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>(hplonline)2009.9.7</p>


<p><font color="#0000ff">简介：</font></p>


<p>总的来说，个人认为是一种理论上很充分，<br/>
但数据源很随意的方法。</p>


<p>通常在做某种决策的时候，<br/>
方案带有若干属性，<br/>
无法找到某个方案让各个属性同时满足最优。<br/>
这就需要取舍，决定究竟哪个方案更好。</p>


<p>其精华在于通过分层，<br/>
将比较局部化，使得人更容易作出决策。</p>


<p><font color="#0000ff">实例：</font></p>


<p>有三个女的，选一个当女朋友，现掌握的信息如下：<br/>
1.女1比女2容貌好很多<br/>
2.女1比女3容貌好一点<br/>
3.女3比女2容貌好一点<br/>
4.女2非常有思想，女1女3都很一般<br/>
5.女3比女1有才</p>


<p>整理出来，可评价的指标有三种：<font color="#ff9900">容貌，思想，才华。</font></p>


<p>而直观看上去，貌似三个女的都各有所长，<br/>
非要揉成一团地看过去，很难取舍。<br/>
虽然从总体上，说不清哪个更好，<br/>
但正如给出的5点信息，<br/>
我们可以站在某特定的指标上给出评价。<br/>
这时，可以使用层次分析法，<br/>
将这种比较局部化。</p>


<p><font color="#0000ff">分层如下：</font></p>


<p><span><span><img class="blogimg" height="334" width="474" border="0" small="0" src="http://hiphotos.baidu.com/hplonline/pic/item/a194c08085967bfc9023d9a0.jpg"/><br/></span><br/></span></p>


<p>一般做层次分析的时候，<br/>
最上层是目标层，<font color="#ff9900">往往只有一个目标</font>。<br/>
中间若干层是准则层，即这里各种评价指标，<br/>
这里只用了一层，但可以用多层，处理方法类似。<br/>
最下层是方案层，即这里的三个女的。<br/><font color="#ff0000">整个问题就是求出各个方案对目标层的权重。</font></p>


<p>因为马上要用数字描述一个强度，<br/>
这里做如下定义：<br/><font color="#ff9900">i比j一样强，1<br/>
i比j稍微强，3<br/>
i比j强，5<br/>
i比j明显地强，7<br/>
i比j强非常多，9</font><br/>
（这个定义是常用的1-9定义法，<br/>
如果程度在这几个描述之间，<br/>
可以用2、4、6、8来刻画。<br/>
这是Saaty经过大量实验确定的，<br/>
比较适合用来描述的度量方式）<br/>
当j比i强的时候，取跟上面相应的倒数。</p>


<p>首先，看准则层对目标层的影响。<br/>
记A(i,j)为i跟j比的强度，<br/>
而A(j,i)=1/A(i,j)，<br/>
所以对于三个准则，仅需两两比较，共三次即可。<br/>
显然，始终有A(i,i)=1。</p>


<p>容貌跟思想相比，显然没那么重要，<br/>
因为大家都知道韩国人很厉害的，<br/>
整改一下完全可行，<br/>
而思想可是一个恼火的事情，<br/>
要发现一个有思想的人真的很困难。<br/>
所以，A(1,2)=1/7。</p>


<p>容貌跟才华相比，就不那么明晰了。<br/>
从先天的角度来说，<br/>
容貌还真的是天生的，<br/>
而有些人在某些方面本来就有天赋，<br/>
自然也就显得有才一点。<br/>
从后天的角度来说，<br/>
容貌可以通过去韩国解决，<br/>
才华方面，假以时日，不难培养。<br/>
于是A(1,3)=1。</p>


<p>思想和才华比，重要性也是显著的，<br/>
因为给一个人洗脑比教其用C难度大。<br/>
这里就给一个A(2,3)=5吧。</p>


<p>综合下来，准则层对目标层的成对比较矩阵为：<br/>
A = [<br/>
1    1/7    1 ;<br/>
7    1    5 ;<br/>
1    1/5    1 ;<br/>
] ;</p>


<p>前面给出的3条信息比较明确，<br/>
按照同样的方法，可以给出在容貌这个准则下，<br/>
三个女的成对比较矩阵：<br/>
B{1} = [<br/>
1    5    3 ;<br/>
1/5    1    1/3 ;<br/>
1/3    3    1 ;<br/>
] ;</p>


<p>第4条信息比较简短，<br/>
但从中能够得到两两比较的信息。<br/>
构造出的在思想这个准则下，<br/>
三个女的成对比较矩阵：<br/>
B{2} = [<br/>
1    1/7    1 ;<br/>
7    1    7 ;<br/>
1    1/7    1 ;<br/>
] ;</p>


<p>第5条信息就需要一点技术上的处理了。<br/>
从字面上，可以先构造出：<br/>
B{3} = [<br/>
1    ?  1/3 ;<br/>
?    1    ? ;<br/>
3    ?    1 ;<br/>
] ;<br/>
另外两处，没有进行比较，<br/>
这在实际中也是可能经常出现的，<br/>
比如有两者由于信息确实没法比较，<br/>
或者不愿意进行比较。。。</p>


<p>关于层次分析的讲解中，<br/>
也给出了填充这个矩阵的方法：<br/><font color="#ff0000">1.问号部分用0代替<br/>
2.对角线上的数为一行中问号的个数加一</font></p>


<p>结果为：<br/>
B{3} = [<br/>
3    0  1/3 ;<br/>
0    3    0 ;<br/>
3    0    3 ;<br/>
] ;</p>


<p>得到这些成对比较矩阵之后，<br/>
最终权重的算法如下：（向量都是列向量）<br/><font color="#ff0000">1.求得A的主特征向量wA<br/>
2.求得B{1},B{2},B{3}的主特征向量wB{1},wB{2},wB{3}<br/>
3.构造方案层对准则层的权矩阵，WB=[wB{1},wB{2},wB{3}]<br/>
4.最终权重w=WB*wA</font></p>


<p><font color="#0000ff">用MATLAB来实现程序如下：</font></p>


<p>%层次分析<br/>
function ahp<br/>
A = [<br/>
1    1/7    1 ;<br/>
7    1    5 ;<br/>
1    1/5    1 ;<br/>
] ;<br/>
B{1} = [<br/>
1    5    3 ;<br/>
1/5    1    1/3 ;<br/>
1/3    3    1 ;<br/>
] ;<br/>
B{2} = [<br/>
1    1/7    1 ;<br/>
7    1    7 ;<br/>
1    1/7    1 ;<br/>
] ;<br/>
B{3} = [<br/>
3    0  1/3 ;<br/>
0    3    0 ;<br/>
3    0    3 ;<br/>
] ;<br/>
BN = size(B{1}) ;<br/>
[ciA , wA] = get_main_eig(A) ;<br/>
for i = 1:BN<br/>
     [ciB{i},wB{i}] = get_main_eig(B{i}) ;     <br/>
end<br/>
WB = [] ;<br/>
for i = 1:BN<br/>
     WB = [WB wB{i}]  ;  <br/>
end<br/>
%输出一致性<br/>
ciA<br/>
for i = 1:BN<br/>
     ciB{i}     <br/>
end<br/>
%最终权重<br/>
w = WB * wA</p>


<p>%取主特征值<br/>
function [ci,w] = get_main_eig(X)<br/>
[v d] = eig(X) ;<br/>
n = size(X , 1) ;<br/>
[m i] = max(sum(abs(d))) ;<br/>
w = v(: , i) ;<br/>
w = w / sum(w) ;<br/>
ci = (m - n) / (n - 1) ;</p>


<p>结果：</p>


<p>最后求得的w输出为：<br/>
     0.1924<br/>
     0.5935<br/>
     0.2140</p>


<p>说明女2赢了。。。<br/>
其实这个世界本来就应该重视思想的。。</p>


<p><font color="#0000ff">方法评价：</font></p>


<p>正如大家看到的，<br/>
计算过程都是数学上的操作，<br/>
但构造成对比较矩阵的时候，显得有点YY。<br/>
在实际操作中，<br/>
一般是请一群相关方向的砖家，<br/>
进行群体判断。</p>


<p>至于开始说的目标层一般只有一个目标，<br/>
这倒真的是一般情况，<br/>
如果能做到有多个目标，<br/>
且每个目标与一个准则对应，那原来的问题就不是问题了。</p>


<p>比如，把原来的目标去掉，三个准则变为目标。<br/>
那么针对容貌好的，咱选一个，<br/>
针对有思想的，咱选一个，<br/>
针对有才的，咱还选一个。<br/>
如此一来，脚踏三船，<br/>
不用这么费力就可以作出决策了。</p>


<p><font color="#ff0000">所以有的时候，<br/>
社会伦理学家做出的一小点点改进，<br/>
即可让数学家节省很多精力。。</font></p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">hplonline</span></span>

      








  


<time datetime="2009-09-07T21:03:00+08:00" pubdate data-updated="true">Sep 7<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/backup-hplonline/blog/categories/tech/'>tech</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hupili.github.io/backup-hplonline/blog/2009/09/07/%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95%EF%BC%88%E4%BB%A5%E9%80%89%E5%A5%B3%E5%8F%8B%E4%B8%BA%E4%BE%8B%EF%BC%89/" data-via="" data-counturl="http://hupili.github.io/backup-hplonline/blog/2009/09/07/%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95%EF%BC%88%E4%BB%A5%E9%80%89%E5%A5%B3%E5%8F%8B%E4%B8%BA%E4%BE%8B%EF%BC%89/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/backup-hplonline/blog/2009/09/02/%E9%A2%84%E6%B5%8B%E6%89%8B%E6%AE%B5%EF%BC%8C%E5%AE%9A%E5%8F%82%E6%89%8B%E6%AE%B5/" title="Previous Post: 预测手段，定参手段">&laquo; 预测手段，定参手段</a>
      
      
        <a class="basic-alignment right" href="/backup-hplonline/blog/2009/09/09/%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95%E7%9A%84%E6%A8%A1%E5%9D%97/" title="Next Post: 遍历目录的模块">遍历目录的模块 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/backup-hplonline/blog/2013/05/04/test/">Test</a>
      </li>
    
      <li class="post">
        <a href="/backup-hplonline/blog/2011/04/09/%E5%86%8D%E8%B0%88stl%E7%9A%84rotate/">再谈stl的rotate</a>
      </li>
    
      <li class="post">
        <a href="/backup-hplonline/blog/2011/02/01/%5Bpaper%5DXORsinTheAir%3APracticalWirelessNetworkCoding%EF%BC%88%E7%BF%BB%E8%AF%91%E3%80%81%E4%BA%8C%EF%BC%89/">[paper] XORs in The Air: Practical Wireless Network Coding（翻译、二）</a>
      </li>
    
      <li class="post">
        <a href="/backup-hplonline/blog/2011/02/01/%5Bpaper%5DXORsinTheAir%3APracticalWirelessNetworkCoding%EF%BC%88%E7%BF%BB%E8%AF%91%E3%80%81%E4%B8%89%EF%BC%89/">[paper] XORs in The Air: Practical Wireless Network Coding（翻译、三）</a>
      </li>
    
      <li class="post">
        <a href="/backup-hplonline/blog/2011/02/01/%5Bpaper%5DXORsinTheAir%3APracticalWirelessNetworkCoding%EF%BC%88%E7%BF%BB%E8%AF%91%E3%80%81%E4%B8%80%EF%BC%89/">[paper] XORs in The Air: Practical Wireless Network Coding（翻译、一）</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - hplonline -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
