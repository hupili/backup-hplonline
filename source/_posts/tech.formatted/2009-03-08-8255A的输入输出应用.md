---
layout: post
title: "8255A的输入输出应用"
date: 2009-03-08  20:05
comments: true
categories: tech
tags: ["Scm"]
_baiduhi_id: cc2e5bda324f2cd3b7fd4812.html
_baiduhi_category: Scm
---

(hplonline)2009.3.8<br/><br/><font color="#0000ff">一。目标</font><br/>
8255A，可编程并行输入输出芯片。<br/>
练习了看第二份DATASHEET。<br/>
8个开关做输入，控制数码管的8个端口（7个为显示段，一个为共阴输出）<br/><br/>
被一些丑陋的问题困扰了这么久才出来。。。<br/><br/><font color="#0000ff">二。电路</font><br/><div forimg="1"><img border="0" class="blogimg" small="0" src="http://hiphotos.baidu.com/hplonline/pic/item/a194c0802bb005f69023d9f7.jpg"/></div>
连接的时候，有几个要注意：<br/><font color="#ff0000">1.ABC口要加驱动（74LS373就可以了），要不PROTEUS直接报错<br/>
2.A0,A1两个地址线不能和P0上的数据线共用。。<br/>
（因为我这里没有对地址锁存。。为了这个问题找了半天。。。）</font><br/><br/><br/><font color="#0000ff">三。程序</font><br/><br/>
PORTA EQU 73fch<br/>
PORTB EQU 77fdh<br/>
PORTC EQU 7bfeh<br/>
CONTROL EQU 7fffh<br/>
MOD_AoutBin EQU 82h<br/><br/>
org 00h<br/>
ljmp func_main<br/><br/>
org 30h<br/>
func_main:<br/><br/>
      mov DPTR ,  #CONTROL<br/>
      mov A , #MOD_AoutBin<br/>
      movx @DPTR , A<br/>
_lp:<br/>
      mov DPTR , #PORTB<br/>
      movx A , @DPTR<br/>
      mov DPTR , #PORTA<br/>
      movx @DPTR , A<br/>
      sjmp _lp<br/>
sjmp $<br/><br/>
end <br/><br/>
用到的主要就是外部RAM的寻址。<br/>
首先向控制字里面写入8255的工作方式。<br/>
然后在一个循环中不断从B读入，向A输出就可以了。<br/><br/>
关于怎么寻址，地址的计算，在上一篇里面有了。<br/><br/>
这里主要是8255的A1A0组合成的地址的意义：<br/>
0 1 2     3<br/>
A B C CW<br/>
CW:控制字<br/><br/>
一开始向控制字里写入的82h就是设置A为输出，B为输入，<br/>
这个可以在8255A的DATASHEET上查到。<br/><br/>
四。感想<br/><font color="#ff0000">寻址外部RAM的MOVX很不错。。可以简化很多程序上的设计。。<br/>
只是外围会多加一写芯片。</font>
