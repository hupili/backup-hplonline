---
layout: post
title: "移位寄存控制数码管"
date: 2009-03-09  14:14
comments: true
categories: tech
tags: ["Scm"]
_baiduhi_id: e7ce61602ec7914ceaf8f882.html
_baiduhi_category: Scm
---

(hplonline)2009.3.9<br/><br/>
原理就是74LS164的用法，和串行通信。<br/>
前面已经练习过了，所以很容易。<br/><br/>
http://hi.baidu.com/hplonline/blog/item/967eaec2c20ad0130ff47762.html<br/><br/>
好处：<br/><font color="#ff0000">无需刷新，只占两个IO口！后接数码管任意多</font><br/><br/><font color="#0000ff">一。电路</font><br/><div forimg="1"><img border="0" src="http://hiphotos.baidu.com/hplonline/pic/item/3695942fffd427191e30898c.jpg" small="0" class="blogimg"/></div>
<br/><font color="#0000ff">二。程序</font><br/><br/>
#include &lt;reg51.h&gt;<br/><br/>
sbit dt = P3^0 ;// P1 ^ 1 ;<br/>
sbit clk = P3^1 ; //P1 ^ 0 ;<br/>
typedef unsigned char uchar ;<br/><br/>
void output( uchar cd ){<br/>
     uchar i ;<br/>
     for ( i = 8 ; i ; i -- ){<br/>
          dt = cd &amp; 1 ;<br/>
          cd &gt;&gt;= 1 ; <br/>
          clk = 0 ; <br/>
          clk = 1 ;<br/>
     }<br/>
}<br/><br/>
void main(){<br/>
     output(0x1c);     //"L"<br/>
     output(0xce);     //"P"<br/>
     while(1);     <br/>
}<br/><br/>
其实很简单的事情。<br/>
这里没有用单片机自己的串行通信机制。<br/>
只是根据这样一种原理，自己模拟这个过程。可以做到更快。<br/><br/>
     <font color="#ff0000">     dt = cd &amp; 1 ;这个就是对数据线赋值<br/>
          clk = 0 ; <br/>
          clk = 1 ;然后发送移位脉冲</font><br/><br/>
这样就可以了。<br/><br/>
好处是不用说了，<font color="#ff6600">缺点有一个，就是只能搞7段的。。<br/>
因为每个移位寄存只供8个口，而要腾出一个继续向后输出数据。<br/><br/>
不过可以想办法改到8段也可以用，只是臃肿了点。<br/>
在只用7段的情况下，这样做很强大。。</font>
