---
layout: post
title: "四种键盘的总结（单排键盘。译码键盘。矩阵键盘。矩阵译码键盘。）"
date: 2009-04-12  12:18
comments: true
categories: tech
tags: ["Scm"]
_baiduhi_id: d8fd753e225aae3571cf6c21.html
_baiduhi_category: Scm
---

(hplonline)2009.4.12<br/><br/>
首先，来看一个表，给出了控制相应数目的按钮四种键盘分别需要占用的IO口数。<br/><br/><table cellspacing="0" cellpadding="0" width="691" border="0" style="border-collapse: collapse; width: 519pt;"><col width="174" style="width: 131pt;"/><col width="184" style="width: 138pt;"/><col width="113" span="2" style="width: 85pt;"/><col width="107" style="width: 80pt;"/><tbody><tr height="19" style="height: 14.25pt;"><td height="19" width="174" class="xl24" style="height: 14.25pt; width: 131pt;">按钮数</td>
            <td width="184" class="xl24" style="width: 138pt;">单排键盘</td>
            <td width="113" class="xl24" style="width: 85pt;">单排译码键盘</td>
            <td width="113" class="xl24" style="width: 85pt;">矩阵键盘</td>
            <td width="107" class="xl24" style="width: 80pt;">矩阵译码键盘</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">4</td>
            <td align="right" class="xl24">4</td>
            <td align="right" class="xl24">2</td>
            <td align="right" class="xl24">2</td>
            <td align="right" class="xl24">3</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">16</td>
            <td align="right" class="xl24">16</td>
            <td align="right" class="xl24">4</td>
            <td align="right" class="xl24">4</td>
            <td align="right" class="xl24">4</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl26" style="height: 14.25pt;">32</td>
            <td align="right" class="xl25">32</td>
            <td align="right" class="xl24">5</td>
            <td align="right" class="xl24">6</td>
            <td align="right" class="xl24">5</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">64</td>
            <td align="right" class="xl24">64</td>
            <td align="right" class="xl24">6</td>
            <td align="right" class="xl24">8</td>
            <td align="right" class="xl24">5</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">256</td>
            <td align="right" class="xl24">256</td>
            <td align="right" class="xl24">8</td>
            <td align="right" class="xl24">16</td>
            <td align="right" class="xl24">6</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl26" style="height: 14.25pt;">1024</td>
            <td align="right" class="xl24">1024</td>
            <td align="right" class="xl24">10</td>
            <td align="right" class="xl25">32</td>
            <td align="right" class="xl24">7</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">4096</td>
            <td align="right" class="xl24">4096</td>
            <td align="right" class="xl24">12</td>
            <td align="right" class="xl24">64</td>
            <td align="right" class="xl24">8</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">16384</td>
            <td align="right" class="xl24">16384</td>
            <td align="right" class="xl24">14</td>
            <td align="right" class="xl24">128</td>
            <td align="right" class="xl24">9</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">65536</td>
            <td align="right" class="xl24">65536</td>
            <td align="right" class="xl24">16</td>
            <td align="right" class="xl24">256</td>
            <td align="right" class="xl24">10</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">262144</td>
            <td align="right" class="xl24">262144</td>
            <td align="right" class="xl24">18</td>
            <td align="right" class="xl24">512</td>
            <td align="right" class="xl24">11</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">1048576</td>
            <td align="right" class="xl24">1048576</td>
            <td align="right" class="xl24">20</td>
            <td align="right" class="xl24">1024</td>
            <td align="right" class="xl24">12</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">4194304</td>
            <td align="right" class="xl24">4194304</td>
            <td align="right" class="xl24">22</td>
            <td align="right" class="xl24">2048</td>
            <td align="right" class="xl24">13</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">16777216</td>
            <td align="right" class="xl24">16777216</td>
            <td align="right" class="xl24">24</td>
            <td align="right" class="xl24">4096</td>
            <td align="right" class="xl24">14</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">67108864</td>
            <td align="right" class="xl24">67108864</td>
            <td align="right" class="xl24">26</td>
            <td align="right" class="xl24">8192</td>
            <td align="right" class="xl24">15</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">268435456</td>
            <td align="right" class="xl24">268435456</td>
            <td align="right" class="xl24">28</td>
            <td align="right" class="xl24">16384</td>
            <td align="right" class="xl24">16</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">1073741824</td>
            <td align="right" class="xl24">1073741824</td>
            <td align="right" class="xl24">30</td>
            <td align="right" class="xl24">32768</td>
            <td align="right" class="xl24">17</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl26" style="height: 14.25pt;">4294967296</td>
            <td align="right" class="xl24">4294967296</td>
            <td align="right" class="xl25">32</td>
            <td align="right" class="xl24">65536</td>
            <td align="right" class="xl24">18</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">17179869184</td>
            <td align="right" class="xl24">17179869184</td>
            <td align="right" class="xl24">34</td>
            <td align="right" class="xl24">131072</td>
            <td align="right" class="xl24">19</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">68719476736</td>
            <td align="right" class="xl24">68719476736</td>
            <td align="right" class="xl24">36</td>
            <td align="right" class="xl24">262144</td>
            <td align="right" class="xl24">20</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">274877906944</td>
            <td align="right" class="xl24">274877906944</td>
            <td align="right" class="xl24">38</td>
            <td align="right" class="xl24">524288</td>
            <td align="right" class="xl24">21</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">1099511627776</td>
            <td align="right" class="xl24">1099511627776</td>
            <td align="right" class="xl24">40</td>
            <td align="right" class="xl24">1048576</td>
            <td align="right" class="xl24">22</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">4398046511104</td>
            <td align="right" class="xl24">4398046511104</td>
            <td align="right" class="xl24">42</td>
            <td align="right" class="xl24">2097152</td>
            <td align="right" class="xl24">23</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">17592186044416</td>
            <td align="right" class="xl24">17592186044416</td>
            <td align="right" class="xl24">44</td>
            <td align="right" class="xl24">4194304</td>
            <td align="right" class="xl24">24</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">70368744177664</td>
            <td align="right" class="xl24">70368744177664</td>
            <td align="right" class="xl24">46</td>
            <td align="right" class="xl24">8388608</td>
            <td align="right" class="xl24">25</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">281474976710656</td>
            <td align="right" class="xl24">281474976710656</td>
            <td align="right" class="xl24">48</td>
            <td align="right" class="xl24">16777216</td>
            <td align="right" class="xl24">26</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">1125899906842620</td>
            <td align="right" class="xl24">1125899906842620</td>
            <td align="right" class="xl24">50</td>
            <td align="right" class="xl24">33554432</td>
            <td align="right" class="xl24">27</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">4503599627370500</td>
            <td align="right" class="xl24">4503599627370500</td>
            <td align="right" class="xl24">52</td>
            <td align="right" class="xl24">67108864</td>
            <td align="right" class="xl24">28</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">18014398509482000</td>
            <td align="right" class="xl24">18014398509482000</td>
            <td align="right" class="xl24">54</td>
            <td align="right" class="xl24">134217728</td>
            <td align="right" class="xl24">29</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">72057594037927900</td>
            <td align="right" class="xl24">72057594037927900</td>
            <td align="right" class="xl24">56</td>
            <td align="right" class="xl24">268435456</td>
            <td align="right" class="xl24">30</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl24" style="height: 14.25pt;">288230376151712000</td>
            <td align="right" class="xl24">288230376151712000</td>
            <td align="right" class="xl24">58</td>
            <td align="right" class="xl24">536870912</td>
            <td align="right" class="xl24">31</td>
        </tr><tr height="19" style="height: 14.25pt;"><td height="19" align="right" class="xl26" style="height: 14.25pt;">1152921504606850000</td>
            <td align="right" class="xl24">1152921504606850000</td>
            <td align="right" class="xl24">60</td>
            <td align="right" class="xl24">1073741824</td>
            <td align="right" class="xl25">32</td>
        </tr></tbody></table><br/><br/>
自然，假设把51的32个口都拿来连键盘。四种的极限能力如下：<br/><br/><font color="#ff6600">单排键盘：32<br/>
单排译码键盘：4294967296<br/>
矩阵键盘：1024<br/>
矩阵译码键盘：1152921504606850000</font><br/><br/>
我在之前的文章中大致翻了一下，四种键盘对应的例子都有出现。下面分别给出：<br/>
设控制的键数为n，占用IO口数为x<br/><br/><font color="#0000ff">单排键盘。</font><br/><a target="_blank" href="http://hi.baidu.com/hplonline/blog/item/cc2e5bda324f2cd3b7fd4812.html">http://hi.baidu.com/hplonline/blog/item/cc2e5bda324f2cd3b7fd4812.html</a><br/><font color="#ff0000">x = n </font><br/>
上面那个例子虽然是练习8255的，其实右下角的开关组就是单排键盘的那种意思。<br/>
这键盘构造最为简单，一般初学都会练一下，并且没人想叫他键盘。。<br/><br/><br/><font color="#0000ff">单排译码键盘。</font><br/><a target="_blank" href="http://hi.baidu.com/hplonline/blog/item/2210888be48af6dbfc1f10e2.html">http://hi.baidu.com/hplonline/blog/item/2210888be48af6dbfc1f10e2.html</a><br/><font color="#ff0000">x = ln(n)/ln(2)</font><br/>
上面的例子就是典型的8键到3口。<br/>
从一开始给出的表上来看，这种键盘的能力其实很强的。<br/>
256键仅需要8个口。<br/>
但是不知道为什么没看到有人说。<br/><br/><br/><font color="#0000ff">矩阵键盘。</font><br/><a target="_blank" href="http://hi.baidu.com/hplonline/blog/item/89c8780e2764d3c27acbe1ed.html">http://hi.baidu.com/hplonline/blog/item/89c8780e2764d3c27acbe1ed.html</a><br/><font color="#ff0000">x = sqrt(n)</font><br/>
不得不说，最早想出这么搞的人思路的确不错。<br/>
利用按钮在行列交点的特性，做到了开方的级别。<br/>
这也是很多教材和网友讨论得很多的一种。<br/>
可是从表上看出，其能力还不足单排译码键盘，<br/>
而且该种键盘的编程总是让初学者觉得打脑壳。。<br/><br/><font color="#0000ff">矩阵译码键盘。</font><br/><a target="_blank" href="http://hi.baidu.com/hplonline/blog/item/93ccc5fc8ec8ea8ab801a0b6.html">http://hi.baidu.com/hplonline/blog/item/93ccc5fc8ec8ea8ab801a0b6.html</a><br/><font color="#ff0000">x = ln(sqrt(n))/ln(2) + 2</font><br/>
这个在硬件上要多做一些功夫，但是看过我的例子就知道。<br/>
程序上简单得出奇。。<br/>
主要是一些思想的问题。既然矩阵键盘大家都很熟悉了，<br/>
而译码器又是一客观存在，那么我们完全可以发挥一下创意，结合起来玩。<br/>
首先是基于矩阵键盘，就达到了开方级。<br/>
而一般讲矩阵键盘，是直接一IO口对应一个行线（列线），显然存在太多浪费。<br/>
可以用编码器来获得线上的状态。<br/>
另外的两个口，一个是用来表达有无键按下的，另一个用来输出行列测试信号。<br/><br/><br/><br/><br/><br/>
