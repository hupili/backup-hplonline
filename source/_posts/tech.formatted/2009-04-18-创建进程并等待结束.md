---
layout: post
title: "创建进程并等待结束"
date: 2009-04-18  20:21
comments: true
categories: tech
tags: ["Vc"]
_baiduhi_id: c022ad86fdbd093666096ef8.html
_baiduhi_category: Vc
---

(hplonline)2009.4.18<br/><br/>
最近搞图论的作业，有两个算法要比较。<br/><br/>
当然是写一个judge出来，产生不同的数据，然后调用执行两个程序。<br/><br/>
比较输出的优越性和执行时间。<br/><br/>
一开始直接用WinExec运行，没管那么多。<br/>
试运行一遍，发现数据全错，吓我一跳，因为两个算法程序我也是用大数据测试过的。<br/><br/>
才想起要等待结束后才能继续执行。<br/>
否则大家一起乱搞输出文件，就弄乱了。<br/><br/>
所以需要这么一个函数。<font color="#ff6600">创建进程并等待执行结束</font>。<br/><br/>
翻了下MSDN，上面正好有个例程，把需要的部分提取了一下，就是下面这个样子了。<br/><br/>
void RunAndWait(char *filename){<br/>
     PROCESS_INFORMATION pi ;<br/>
     STARTUPINFO si ;<br/>
     ZeroMemory( &amp;si, sizeof(si) );//初始化为0<br/>
     si.cb = sizeof(si);//cb是指定结构体的长度<br/>
     ZeroMemory( &amp;pi, sizeof(pi) );//初始化为0<br/>
     CreateProcess(filename, NULL, NULL, NULL, FALSE, 0, NULL, NULL, &amp;si, &amp;pi) ;//创建进程<br/>
     WaitForSingleObject( pi.hProcess, INFINITE );//等待结束<br/>
     CloseHandle( pi.hProcess );//消除句柄<br/>
     CloseHandle( pi.hThread );     <br/>
}<br/>
