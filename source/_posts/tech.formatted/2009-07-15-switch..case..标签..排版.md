---
layout: post
title: "switch..case..标签..排版"
date: 2009-07-15  14:34
comments: true
categories: tech
tags: ["c","c++"]
_baiduhi_id: 63e406f30f5723c20b46e0f5.html
_baiduhi_category: c&c++
---

(hplonline)2009.7.15<br/><br/>
上一篇不知道怎么提到排版的问题了。<br/>
当然就说到了强大的alt+f8。<br/>
于是又想到了跟switch有关的一点猥琐事情。<br/><br/><font color="#0000ff">例一：</font><br/><br/>
下面的程序的输出是？<br/><br/><font color="#339966">#include &lt;stdio.h&gt;</font><br/><font color="#0000ff">int</font> main(){<br/>
   <font color="#0000ff"> int </font>a = 0 ;<br/>
      <font color="#0000ff">switch</font>(a){<br/>
      <font color="#0000ff">case</font> 1:puts("aaaa") ;<font color="#0000ff">break</font> ;<br/>
      <font color="#0000ff">defau1t</font>:puts("bbbb") ;<font color="#0000ff">break</font> ;<br/>
      } ;<br/>
  <font color="#0000ff">  return</font> 0 ;<br/>
}<br/><br/>
其实就是什么都不输出。。<br/>
虽然default打错了，<br/>
但是他的欺骗性在于defau1t会被认为是标签，<br/>
于是这段是符合语法的。<br/><br/>
至少有三个办法看出这个问题。<br/>
1.放到IDE里面去，没有被标注高亮的颜色。<br/>
2.特明显的就是VC6的alt+f8。<br/>
被排过后，标签始终是顶到行首的，一眼就看出来了。<br/>
3.编译器要给出一个：<br/>
warning C4102: 'defau1t' : unreferenced label<br/><br/><br/><font color="#0000ff">例二：</font><br/><br/>
在河畔上遇到有人问的。<br/>
帮忙改下面的程序，他得不到期望的结果：<br/><br/>
#include&lt;iostream&gt;<br/>
#include&lt;iomanip&gt;<br/>
using namespace std;<br/>
int main()<br/>
{<br/>
      enum color{red,yellow,blue,white,black};<br/>
      color pri;<br/>
      int i,j,k,n=0,loop;<br/>
      for(i=red;i&lt;=black;i++)<br/>
          for(j=red;j&lt;=black;j++)<br/>
          if(i!=j)<br/>
          {for(k=red;k&lt;=black;k++)<br/>
          if((k!=i)&amp;&amp;(k!=j))<br/>
          {<br/>
          n=n+1;<br/>
          cout&lt;&lt;setw(3)&lt;&lt;n;<br/>
          for(loop=1;loop&lt;=3;loop++)<br/>
          {switch(loop){<br/>
          case1:pri=color(i);break;<br/>
          case2:pri=color(j);break;<br/>
          case3:pri=color(k);break;<br/>
          default:break;<br/>
          }<br/>
          switch(pri)<br/>
          {<br/>
          case red:cout&lt;&lt;setw(8)&lt;&lt;"red";break;<br/>
          case yellow:cout&lt;&lt;setw(8)&lt;&lt;"yellow";break;<br/>
          case blue:cout&lt;&lt;setw(8)&lt;&lt;"blue";break;<br/>
          case white:cout&lt;&lt;setw(8)&lt;&lt;"white";break;<br/>
          case black:cout&lt;&lt;setw(8)&lt;&lt;"black";break;<br/>
          default:break;<br/>
          }<br/>
          }<br/>
          cout&lt;&lt;endl;}}<br/>
cout&lt;&lt;"total:"&lt;&lt;n&lt;&lt;endl;<br/>
return 0;<br/>
}<br/><br/>
不用管他实现的是啥功能，和分析其他逻辑，<br/>
这个事情可以仅仅从<font color="#ff0000">排版技术</font>上解决。<br/><br/>
比如拿到后往VC里一放，ctrl+a，alt+f8。<br/><br/>
#include&lt;iostream&gt;<br/>
#include&lt;iomanip&gt;<br/>
using namespace std;<br/>
int main()<br/>
{<br/>
      enum color{red,yellow,blue,white,black};<br/>
      color pri;<br/>
      int i,j,k,n=0,loop;<br/>
      for(i=red;i&lt;=black;i++)<br/>
          for(j=red;j&lt;=black;j++)<br/>
                  if(i!=j)<br/>
                  {for(k=red;k&lt;=black;k++)<br/>
                  if((k!=i)&amp;&amp;(k!=j))<br/>
                  {<br/>
                        n=n+1;<br/>
                        cout&lt;&lt;setw(3)&lt;&lt;n;<br/>
                        for(loop=1;loop&lt;=3;loop++)<br/>
                        {switch(loop){<br/><font color="#ff0000">case1:pri=color(i);break;<br/>
case2:pri=color(j);break;<br/>
case3:pri=color(k);break;</font><br/>
          default:break;<br/>
                        }<br/>
                        switch(pri)<br/>
                        {<br/>
                        case red:cout&lt;&lt;setw(8)&lt;&lt;"red";break;<br/>
                        case yellow:cout&lt;&lt;setw(8)&lt;&lt;"yellow";break;<br/>
                        case blue:cout&lt;&lt;setw(8)&lt;&lt;"blue";break;<br/>
                        case white:cout&lt;&lt;setw(8)&lt;&lt;"white";break;<br/>
                        case black:cout&lt;&lt;setw(8)&lt;&lt;"black";break;<br/>
                        default:break;<br/>
                        }<br/>
                        }<br/>
                        cout&lt;&lt;endl;}}<br/>
                  cout&lt;&lt;"total:"&lt;&lt;n&lt;&lt;endl;<br/>
                  return 0;<br/>
}<br/><br/>
显然，中间标红的三行会格外的扯人眼球啊。<br/>
标签的这种性质使得我们很容易发现他。<br/><br/>
于是可以很容易的想到，作者是想做<br/>
case 1:<br/>
case 2:<br/>
case 3:<br/>
把空格给打掉了。。。<br/>
这一掉就成了普通的标签了。
