---
layout: post
title: "＃line（VC6）"
date: 2009-11-09  20:27
comments: true
categories: tech
tags: ["Vc"]
_baiduhi_id: 4804376dd1e712f142169475.html
_baiduhi_category: Vc
---

(hplonline)2009.11.9<br/><br/>
昨天观摩一个人用MATLAB和C混合编程，<br/>
看到了一个以前没用过的东西。。<br/><br/>
#line<br/><br/>
其作用是指示编译器改变当前的行号和文件名，用法为：<br/><br/>
#line 2 "1.txt"<br/>
int a ;<br/>
f x ;<br/><br/>
这样，当编译到f x;这句，出现错误，会提示：<br/>
1.txt(3) : error C2146: syntax error : missing ';' before identifier 'x'<br/>
1.txt(3) : error C2501: 'f' : missing storage-class or type specifiers<br/>
1.txt(3) : fatal error C1004: unexpected end of file found<br/><br/>
双击其中的某行，就会打开1.txt，并且定位到第3行，非常方便。<br/><br/>
不过没有找到怎么返回默认的文件名和行号，<br/>
C#倒是有一个#line default。。<br/>
找到了再回来更新。<br/><br/>
想了下这个东西存在的意义，<br/>
发现那是相当的有用。<br/><br/>
当matcom自带的编译器把m文件翻译成cpp的时候，<br/>
很可能会弄错一些语句。<br/>
如果不重新定义行号和文件名的话，<br/>
编译器会把错误定向到cpp文件。<br/>
而重新定义了就可以找到其本源，即某m文件，而且行号对应。<br/><br/>
不过这样做也不一定是必须的，<br/>
因为一般情况下，我们会先在m-file编辑器里调试好，<br/>
然后由相关组件翻译成cpp，一般就不会有问题了。
