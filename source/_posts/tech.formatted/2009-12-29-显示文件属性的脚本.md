---
layout: post
title: "显示文件属性的脚本"
date: 2009-12-29  15:47
comments: true
categories: tech
tags: ["Linux"]
_baiduhi_id: 4411b8fbbb4743294e4aea23.html
_baiduhi_category: Linux
---

<p>(hplonline)2009.12.29</p>
<p>三个星期前做微机原理实验的时候，<br/>
问某牛应该怎么查看文件属性。<br/>
感觉相当惭愧啊。。<br/>
都大三的人了，连linux都不会用。</p>
<p>最近偷点闲，看了下鸟哥的那本书。<br/>
还不错。。知道点基本的东西了。<br/>
就写这么个查看文件属性的脚本来练练手。</p>
<p>主要是if,for,array，ls,cut的用法</p>
<p>另外对vi还是很手生，用起来特慢。<br/>
估计得啥时候刷几场比赛来刺激一下熟练程度。<br/>
不过在那之前貌似还要学下makefile和gdb，<br/>
就可以甩掉IDE在linux下工作了。。</p>
<p><font color="#0000ff">脚本“/usr/bin/attr”：</font></p>
<p>#!/bin/bash<br/>
#created by hpl<br/>
#2009/12/28<br/>
#test the attributes of a file</p>
<p>if [ "$1" = "" ] ; then <br/>
     echo "usage: attr &lt;filename&gt;"<br/>
     exit 1<br/>
fi<br/>
if [ ! -e $1 ] ; then<br/>
     echo "file \"$1\" not exist!!"<br/>
     exit 2<br/>
fi</p>
<p>echo "analyzing file:\"$1\""</p>
<p>if [ -d $1 ] ; then<br/>
     echo "it's a directory"<br/>
     exit 0<br/>
fi</p>
<p>declare -a usr=(owner group other)<br/>
declare -a rt=(read write execute)</p>
<p>for (( i=0 ; i&lt;=2 ; i=i+1 ))<br/>
do<br/>
     echo "${usr[$i]}:"<br/>
     for (( j=0 ; j&lt;=2 ; j=j+1))<br/>
     do<br/>
         declare -i k=i*3+j+2<br/>
         ex=`ls -l $1 | cut -c $k`<br/>
         if [ "$ex" = "-" ] ; then<br/>
             echo "     can't ${rt[$j]}"<br/>
         else<br/>
             echo "     can ${rt[$j]}"<br/>
         fi<br/>
     done<br/>
done</p>
<p><font color="#0000ff">执行结果：（显示部分标红）</font></p>
<p>hpl@ubuntu:~/Desktop/myfirstbash$ ls -l<br/>
total 8<br/>
-rwxr--r-- 1 hpl hpl  686 2009-12-28 23:24 attr<br/>
-rw-r--r-- 1 hpl hpl     0 2009-12-28 23:26 new file<br/>
drwxr-xr-x 2 hpl hpl 4096 2009-12-28 23:26 testdir<br/>
-rw-r--r-- 1 hpl hpl     0 2009-12-28 23:26 testfile<br/>
hpl@ubuntu:~/Desktop/myfirstbash$ touch testscript<br/>
hpl@ubuntu:~/Desktop/myfirstbash$ chmod 744 testscript<br/>
hpl@ubuntu:~/Desktop/myfirstbash$ ls<br/>
attr  new file  testdir  testfile  testscript<br/>
hpl@ubuntu:~/Desktop/myfirstbash$ ls -l<br/>
total 8<br/>
-rwxr--r-- 1 hpl hpl  686 2009-12-28 23:24 attr<br/>
-rw-r--r-- 1 hpl hpl     0 2009-12-28 23:26 new file<br/>
drwxr-xr-x 2 hpl hpl 4096 2009-12-28 23:26 testdir<br/>
-rw-r--r-- 1 hpl hpl     0 2009-12-28 23:26 testfile<br/>
-rwxr--r-- 1 hpl hpl     0 2009-12-28 23:27 testscript<br/>
hpl@ubuntu:~/Desktop/myfirstbash$ attr kkk<br/><font color="#ff0000">file "kkk" not exist!!</font><br/>
hpl@ubuntu:~/Desktop/myfirstbash$ attr testdir<br/><font color="#ff0000">analyzing file:"testdir"<br/>
it's a directory</font><br/>
hpl@ubuntu:~/Desktop/myfirstbash$ attr testfile<br/><font color="#ff0000">analyzing file:"testfile"<br/>
owner:<br/>
     can read<br/>
     can write<br/>
     can't execute<br/>
group:<br/>
     can read<br/>
     can't write<br/>
     can't execute<br/>
other:<br/>
     can read<br/>
     can't write<br/>
     can't execute<br/></font>hpl@ubuntu:~/Desktop/myfirstbash$ attr testscript<br/><font color="#ff0000">analyzing file:"testscript"<br/>
owner:<br/>
     can read<br/>
     can write<br/>
     can execute<br/>
group:<br/>
     can read<br/>
     can't write<br/>
     can't execute<br/>
other:<br/>
     can read<br/>
     can't write<br/>
     can't execute</font></p>
<p> </p>
<p>其实这东西也就是玩玩，正常人不会用的。</p>
<p>直接一个ls -l 瞟一眼就知道是啥属性了。。<br/></p>
