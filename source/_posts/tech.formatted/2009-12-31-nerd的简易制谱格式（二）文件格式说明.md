---
layout: post
title: "nerd的简易制谱格式（二）文件格式说明"
date: 2009-12-31  14:43
comments: true
categories: tech
tags: ["Matlab"]
_baiduhi_id: de16141737878d0a4a90a79f.html
_baiduhi_category: Matlab
---

(hplonline)2009.12.30<br/><br/><font color="#0000ff">mymusic.m :</font><br/>
输入文件名，<br/>
m可以当作是music的意思，<br/>
不过后面还有更恰当的解释<br/><br/><font color="#0000ff">此格式的目的：</font><br/>
高效地主谱录入，以及验证。<br/>
不提供纠错功能，自行对照格式说明排查。<br/>
不是给专业人士使用，<br/>
也不是用来生成可以供人欣赏的音乐。<br/>
作为nerd和geek节约时间的工具，<br/>
或者说仅仅是我自己近期将使用的格式。<br/><br/>
但是我尽量让我的格式简洁，<br/>
即使一个普通人都可以理解此格式。<br/>
而不像专业制谱的时候，<br/>
光是休止符，还得分个4分8分16分之类的。<br/>
同时，此格式提供足够的灵活性，<br/>
只要你想，弄个3.1415926拍长的音出来也完全没有问题。<br/>
而且你可以指定你需要的频率，<br/>
而不是局限在老师教你的那些规整的音上面。<br/>
虽然我不提供各种反复和跳转记号，<br/>
但完全不影响使用。<br/>
由于这个文件是纯文本的，<br/>
把对着需要的段子ctrl+c,ctrl+v就可以了。<br/>
根本不用像在一个软件里面找个功能那么麻烦。<br/><br/><font color="#0000ff">注释方法：</font><br/>
% ，表示将该行后面的内容均注释掉<br/>
注意后面至少有一个空格。<br/><br/><font color="#ff9900">为什么要用这个注释呢。。｛<br/><br/>
一方面是因为最近用matlab比较多，<br/>
第而个是matlab的editor确实不错，<br/>
ctrl+r,ctrl+t来控制注释很方便。<br/>
这样可以使用matlab的editor来编辑我这种音乐格式，<br/>
调试起来应该很方便。<br/><br/>
另外由于要m文件，editor才会接受这个快捷键，<br/>
所以说存成.m而已啦。。其实都是纯文本的。<br/>
用notepad一样可以搞定。。<br/><br/>
｝</font><br/><br/><font color="#0000ff">音符标号：</font><br/>
1,2,3,4,5,6,7分别表示7个音<br/>
0表示休止符<br/>
Dn，其中n为一个实数，表示一个自定义的，频率为n的音<br/><br/>
#表示升调，b表示降调，目前不准备提供这个支持。<br/>
因为简谱中很少用到升降，即使用到了，<br/>
可以使用Dn方式自行解决。<br/><br/>
音阶标号：<br/>
L,N,H,I，从低到高，N为普通阶，N1即中央C<br/>
当前默认为N阶<br/><br/>
音长标号：<br/>
使用实数，如0.5、3、4、11等，表示单位音长的倍数，<br/><br/>
元音长：<br/>
T=0.6，表示0.6秒为元音长，在文件开头设定一次。<br/>
默认为0.5。<br/><br/>
单位音长：<br/>
U=实数，表示一个单位音持续的时间为T的倍数。<br/>
在需要的时候重新设定。<br/>
默认为1。<br/><br/><font color="#ff9900">关于单位音长和元音长设定的注解<br/>
｛<br/><br/>
元音长具有全局意义，一处改动将导致整首歌的快慢变化。<br/>
单位音长的意义是增量式的，作用范围在设定之后。<br/>
这样当有连续几个音节奏相同的时候，可以省去省去重复的音长标号。<br/><br/>
元音长一般取得较短，这样单位音长的设定更有灵活性。<br/><br/>
｝</font><br/><br/><font color="#0000ff">当前音阶设定：</font><br/>
S={L|N|H|I}<br/><br/>
单音指定范式：<br/>
[音阶标号]&lt;音符标号&gt;[,&lt;音长标号&gt;]<br/>
音阶标号省去，即为当前音阶。<br/>
音长标号省去，即为单位音长。<br/>
中间是英文状态的逗号。<br/><br/><font color="#ff9900">关于范式的注解<br/>
｛<br/><br/>
这个格式是为快速编辑所设定。<br/>
一般来说，连续的若干个音可以具有相同的长度，<br/>
比如后面示例中的这个歌，依然富含信息量。<br/>
但若连续的若干的音具有相同的音调，和不同的长度，<br/>
则一般是不会出现这种情况的。。<br/>
（否则干嘛不去打鼓。。。。）<br/>
即使出现后，往往也是音调和长度都相同的几个音。<br/><br/>
所以为使录入得到简化，我仅将音符标号作为必要元素。<br/>
而音长和音阶都可以使用一个具有“当前”意义的值。<br/>
只需要在极复杂的情况下带上音阶和标号，<br/>
变化较小时直接修改当前值即可。<br/><br/>
｝</font><br/><br/><font color="#0000ff">文件排版规范：</font><br/><br/>
不拘泥于一般制谱的“小节”概念，<br/>
也不使用“切分”和“连音”的方式。<br/>
仅需要给出音高和长度等信息即可，<br/>
详细情况见《单音指定范式》。<br/><br/>
各语法单元使用空白符分割，<br/>
即空格，TAB，回车，等，可随意书写。<br/>
但是必须的，即使 % 的注释后也不可直接跟内容，<br/>
至少一个空格。%也不能直接跟到上一个单元的结尾。<br/>
即使这样，还是建议用换行分割有意义的单元，<br/>
以及使用注释等来划分更大的区块。<br/><br/><font color="#0000ff">范例：</font><br/><br/>
% 欢乐颂,hplonline,2009/12/30<br/>
T=0.6 % 设定元音符<br/><br/>
3 3 4 5 5 4 3 2 1 1 2 3 3,1.5 2,0.5 2,2<br/>
3 3 4 5 5 4 3 2 1 1 2 3 2,1.5 1,0.5 1,2<br/>
2 2 3 1 2 3,0.5 4,0.5 3 1 <br/>
2 3,0.5 4,0.5 3 2 1 2 L5,2<br/>
3 3 4 5 5 4 3 2 1 1 2 3 2,1.5 1,0.5 1,4
