---
layout: post
title: "shell中的函数。。（蛋疼了一个汉诺塔）"
date: 2010-01-06  22:04
comments: true
categories: tech
tags: ["Linux"]
_baiduhi_id: a973a3018a01290d1d95839b.html
_baiduhi_category: Linux
---

(hplonline)2010.1.6<br/><br/>
去年弄了下shell，<br/>
练了些基本的东西和分支、循环那些。<br/>
今天想起试了下函数。<br/><br/><font color="#0000ff">note：</font><br/><br/>
函数定义 <br/><br/>
myfun(){<br/>
cmd1<br/>
cmd2<br/>
}<br/><br/>
function myfun(){<br/>
cmd1<br/>
cmd2<br/>
}<br/><br/>
函数内部可以以$1,$2等引用参数<br/><font color="#ff0000">$0仍然表示整个脚本的文件名</font><br/><br/>
调用<br/>
myfun arg1 arg2 arg3<br/><br/>
可以在函数外面用declare声明全局变量。<br/>
在函数内声明的变量不会带到函数外面。<br/><br/><font color="#0000ff">汉诺塔：</font><br/><pre>#!/bin/bash<br/>#2010/1/6<br/>#by hpl<br/>#solving hanoi tower problem <br/>#just for fun and practise the usage of function <br/><br/>declare -i total #total steps used by the script<br/>function solve(){<br/>if [ "$4" != "0" ] ; then<br/>total=total+1<br/>declare -i n=$4<br/>declare -i nn=n-1<br/>solve $1 $3 $2 $nn <br/>echo "move from $1 to $3"<br/>solve $2 $1 $3 $nn <br/>fi<br/>}<br/><br/>echo "please input the number of pieces n="<br/>read n <br/>echo "hey buddy , follow my steps:"<br/>echo "(the stub are named a,b,c from left to right)"<br/>total=0<br/>solve a b c $n<br/>echo "total steps used : $total"</pre>
<font color="#0000ff">运行示例：<br/></font><br/><pre>hpl@ubuntu:~/Desktop/myscripts$ ./hanoi<br/>please input the number of pieces n=<br/>3<br/><font color="#ff00ff">hey buddy , follow my steps:<br/>(the stub are named a,b,c from left to right)<br/>move from a to c<br/>move from a to b<br/>move from c to b<br/>move from a to c<br/>move from b to a<br/>move from b to c<br/>move from a to c<br/>total steps used : 7</font><br/><font color="#0000ff"><br/>感想：</font><br/><br/>这shell里面像if ，for ，while ，until 等等，<br/>语法都很奇怪。。真的是非常奇怪。。<br/>目前相当不熟悉，办起事来没直接用C写来得快。<br/><br/>但是linux的fanboys老是说shell很牛X。<br/>我想一方面是因为他本身有成为牛X的潜力，<br/>另一方面是因为用多了的原因。<br/><br/>好比一个最基础的问题，<br/>是刀厉害还是剑厉害。。<br/>这完全要看是在谁手里了，<br/>据说高手都是用内力的。<br/><br/>如果一个人天天shell，自然会觉得很爽很有效率。<br/><br/>不过潜力也是不可忽视的，<br/>比如DOS的批处理，先天就差一截。<br/>再怎么天天用，也不会高效到和linux的shell相比。</pre>
