---
layout: post
title: "环境变量函数（C,Linux）"
date: 2010-01-08  19:39
comments: true
categories: tech
tags: ["Linux"]
_baiduhi_id: 6a1e00d1aa0dbed8562c84ae.html
_baiduhi_category: Linux
---

<p>(hplonline)2010.1.8</p>
<p>linux下c的stdlib里面带有几个操作环境变量的函数。<br/><font color="#ff9900">getenv , putenv , setenv , unsetenv</font><br/>
其中putenv的功能在setenv下面显得冗余了。<br/>
不过调用方式有点小区别，<br/>
用不着怎么描述，看代码就知道了。</p>
<p>另外想起了弄个宏<br/><font color="#ff0000">#define S(x) printf("%s\n" , #x) ; x ;</font> <br/>
这样在shell上观察语句效果比较方便，<br/>
便于学习各种函数时使用。</p>
<p><font color="#0000ff">示例代码：</font></p>
<p>#include &lt;stdio.h&gt;<br/>
#include &lt;stdlib.h&gt;</p>
<p>#define S(x) printf("%s\n" , #x) ; x ;</p>
<p>void print_env(char *name){<br/>
     char *buf ;<br/>
     buf = getenv(name) ;<br/>
     printf("%s:\n%s\n\n" , name , buf) ;<br/>
}</p>
<p>int main(){<br/>
     char *buf ;<br/>
     //test of getenv in function print_env<br/>
     //show the variable PATH<br/>
     S(print_env("PATH") ;)<br/>
     //print a variable that not exists<br/>
     print_env("HPL") ;<br/>
     //try to put an variable through putenv<br/>
     S(putenv("HPL=1") ;)<br/>
     print_env("HPL") ;<br/>
     //try to put an variable through setenv<br/>
     S(setenv("HPL2" , "2" , 1) ;)<br/>
     print_env("HPL2") ;<br/>
     //try the difference of override flag of setenv<br/>
     S(setenv("HPL2" , "3" , 0) ;)<br/>
     print_env("HPL2") ;<br/>
     S(setenv("HPL2" , "3" , 1) ;)<br/>
     print_env("HPL2") ;<br/>
     //try removing variables<br/>
     S(unsetenv("HPL") ;)<br/>
     S(unsetenv("HPL2") ;)<br/>
     print_env("HPL") ;<br/>
     print_env("HPL2") ;</p>
<p>     S(printf("aaaa")) ;</p>
<p>     return 0 ;<br/>
}</p>
<p>看通原很郁闷，<br/>
正好vim配方便了，手痒。</p>
