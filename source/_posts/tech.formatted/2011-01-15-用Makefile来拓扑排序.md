---
layout: post
title: "用Makefile来拓扑排序"
date: 2011-01-15  13:53
comments: true
categories: tech
tags: ["Linux"]
_baiduhi_id: b8eb460843a8fc870b7b82cf.html
_baiduhi_category: Linux
---

<p>(hplonline)2011.1.15</p><p> </p><p>我，其实是来灌水的。</p><p> </p><p>只要知道什么是拓扑排序，什么是makefile，那看下面代码就成了：</p><p>#!/bin/bash<br/># all goals<br/>echo "all:\\" &gt; Makefile<br/>awk '{print $1; print $2}' input | sort -u | awk '{print $0," \\"}' &gt;&gt; Makefile<br/>echo "" &gt;&gt; Makefile<br/># single solution<br/>awk '{print $1; print $2}' input | sort -u | awk '{print $0,":\n\techo",$0}' &gt;&gt; Makefile<br/># dependency <br/>sed 's/ /:/g' input &gt;&gt; Makefile<br/>make -s</p><p> </p><p>输入文件：<span style="color: rgb(15, 153, 50);">$ cat input</span><br/>1 2<br/>1 3<br/>2 4<br/>4 3<br/>5 2</p><p>测试输出：<span style="color: rgb(15, 153, 50);">$ ./topo.sh </span><br/>3<br/>4<br/>2<br/>1<br/>5</p><p> </p><p>如果有循环依赖，make会自己报出来，像这样：</p><p>make: Circular 4 &lt;- 3 dependency dropped.</p><p> </p><p> </p><p> </p><p> </p>
